<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="Contact page for Moataz Elmesmary - BI Developer and Data Analyst portfolio" />
        <meta name="author" content="Moataz Elmesmary" />
        <title>Contact - Moataz Elmesmary</title>
        <link rel="icon" type="image/x-icon" href="assets/seo.ico" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
        <link href="css/styles.css" rel="stylesheet" />

        <style>
            /* Main color scheme */
            :root {
                --primary-color: #2937f0;
                --secondary-color: #9f1ae2;
                --accent-color: #6a11cb;
                --light-color: #f8f9fa;
                --dark-color: #212529;
            }

            body {
                position: relative;
                overflow-x: hidden;
                background-color: #fdfdfd; /* Slightly off-white background */
            }

            /* Gradient text effect */
            .text-gradient {
                background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .bg-gradient-primary-to-secondary {
                background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)) !important;
            }

            /* Enhanced contact card with better shadows and effects */
            .contact-card {
                transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
                border-radius: 20px;
                overflow: visible; /* Changed from hidden to allow border effect */
                box-shadow: 0 10px 30px rgba(0,0,0,0.12), 0 1px 8px rgba(0,0,0,0.06);
                background: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
                position: relative;
                z-index: 1;
                 /* Removed bg-light class reference as background is set here */
            }

            .contact-card:hover {
                transform: translateY(-12px);
                box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            }

/* Enhanced Animated Gradient Border for Contact Card on Hover - Dynamic colors */
.contact-card::before {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    background: linear-gradient(45deg, 
        rgba(41, 55, 240, 0.25),    /* Primary blue - very light */
        rgba(159, 26, 226, 0.25),   /* Purple - very light */
        rgba(0, 204, 255, 0.25),    /* Cyan - very light */
        rgba(105, 240, 174, 0.25),  /* Light green - very light */
        rgba(255, 204, 0, 0.25),    /* Gold - very light */
        rgba(41, 55, 240, 0.25));   /* Back to blue - very light */
    border-radius: 25px;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.5s ease;
    background-size: 500% 500%;    /* Larger background size for smoother animation */
    animation: gradientBorder 12s linear infinite;  /* Slower, smoother animation */
}

/* Enhanced animation for more dynamic color flow */
@keyframes gradientBorder {
    0% { background-position: 0% 50%; }
    25% { background-position: 50% 100%; }
    50% { background-position: 100% 50%; }
    75% { background-position: 50% 0%; }
    100% { background-position: 0% 50%; }
}

.contact-card:hover::before {
    opacity: 0.8;    /* Slightly higher opacity but still transparent */
    filter: blur(5px); /* Adding blur to make it more dreamy */
    box-shadow: 0 0 15px rgba(41, 55, 240, 0.2), 0 0 30px rgba(159, 26, 226, 0.15);  /* Multi-color soft glow */
}

/* Add a subtle floating animation to the card when hovered */
.contact-card:hover {
    animation: card-float 4s ease-in-out infinite;
}

@keyframes card-float {
    0% { transform: translateY(-12px); }
    50% { transform: translateY(-18px) scale(1.01); } /* Slight scale during float */
    100% { transform: translateY(-12px); }
}

/* Add a sparkle effect to the borders */
.contact-card::after {
    content: '';
    position: absolute;
    top: -3px;
    left: -3px;
    right: -3px;
    bottom: -3px;
    border-radius: 20px;
    z-index: -2;
    opacity: 0;
    background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), 
                rgba(255, 255, 255, 0.8) 0%, 
                transparent 20%);
    transition: opacity 0.5s ease;
    pointer-events: none;
}

.contact-card:hover::after {
    opacity: 0.4;
    animation: sparkle-move 5s infinite;
}

@keyframes sparkle-move {
    0% { --x: 10%; --y: 20%; }
    25% { --x: 90%; --y: 10%; }
    50% { --x: 80%; --y: 90%; }
    75% { --x: 10%; --y: 80%; }
    100% { --x: 10%; --y: 20%; }
}

            @keyframes gradientBorder {
                0% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
                100% { background-position: 0% 50%; }
            }

             /* Enhanced social media icons container */
            .social-icons-container {
                display: flex;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap;
                gap: 20px; /* Increased gap */
                padding: 20px 0;
            }

             /* Wrapper for individual social icon for hover effects */
            .social-icon-wrapper {
                position: relative;
                width: 60px; /* Slightly smaller */
                height: 60px;
                display: flex;
                justify-content: center;
                align-items: center;
                border-radius: 50%;
                background: white;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                animation: float 6s ease-in-out infinite;
                animation-delay: calc(var(--i) * 0.2s); /* Stagger animation */
            }

            .social-icon-wrapper:hover {
                transform: translateY(-15px) scale(1.1);
                box-shadow: 0 15px 25px rgba(0,0,0,0.2);
            }

            /* Background effect for social icon wrapper on hover */
            .social-icon-wrapper::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border-radius: 50%;
                background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
                opacity: 0;
                z-index: -1; /* Behind the icon */
                transition: all 0.3s ease;
                transform: scale(0.8);
            }

            .social-icon-wrapper:hover::before {
                opacity: 1;
                transform: scale(1.1); /* Slightly larger than wrapper */
            }

             /* Styling for the actual icon */
            .social-icon {
                font-size: 1.8rem; /* Adjusted size */
                color: var(--primary-color);
                transition: all 0.4s ease; /* Smooth transition */
                position: relative; /* Ensure icon is above ::before */
                z-index: 2;
            }

            /* Icon color change and rotation on wrapper hover */
            .social-icon-wrapper:hover .social-icon {
                color: white;
                transform: rotate(15deg); /* Slight rotation */
            }

             /* Floating animation for social icons */
            @keyframes float {
                0% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
                100% { transform: translateY(0); }
            }

             /* Button and form enhancements */
            .btn-primary {
                background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
                border: none;
                transition: all 0.4s ease;
                box-shadow: 0 4px 15px rgba(0,0,0,0.1);
                position: relative;
                overflow: hidden;
                z-index: 1;
                color: white; /* Ensure text is white */
            }

            /* Shine effect for button on hover */
            .btn-primary::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100%);
                transition: all 0.6s ease; /* Slower shine effect */
                z-index: 1; /* Above background, below text */
                transform: skewX(-25deg);
            }

            .btn-primary:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 20px rgba(41, 55, 240, 0.3); /* Colored shadow */
            }

            .btn-primary:hover::before {
                left: 100%;
            }

             /* Form control styling */
            .form-control {
                border-radius: 10px;
                transition: all 0.3s ease;
                border: 1px solid rgba(0,0,0,0.1);
            }

            .form-control:focus {
                box-shadow: 0 0 0 4px rgba(41, 55, 240, 0.15);
                border-color: var(--primary-color);
                transform: scale(1.02); /* Slight scale on focus */
            }

             /* Background elements */
            .animated-background {
                position: fixed; /* Changed to fixed */
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -2; /* Further back */
                overflow: hidden;
            }

            /* Web spider effect */
            .web-container {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: -1; /* Behind content, above background */
            }

            .web-node {
                position: absolute;
                width: 4px;
                height: 4px;
                background: rgba(41, 55, 240, 0.5);
                border-radius: 50%;
            }

            .web-line {
                position: absolute;
                height: 1px;
                background: linear-gradient(90deg, rgba(41, 55, 240, 0.1), rgba(159, 26, 226, 0.1)); /* Fainter lines */
                transform-origin: left center;
                z-index: -1;
            }

             /* Butterfly styles */
            .butterfly {
                position: absolute;
                width: 30px;
                height: 30px;
                pointer-events: none;
                z-index: 2; /* Above web, below content usually */
                filter: drop-shadow(0 0 5px rgba(255,255,255,0.5)); /* Softer shadow */
                opacity: 0; /* Start hidden, fade in via JS */
                transition: opacity 1s ease;
            }

            .butterfly-body {
                position: absolute;
                width: 4px;
                height: 16px;
                background: rgba(0,0,0,0.6);
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                border-radius: 2px;
                z-index: 3;
            }

            .butterfly-wing {
                position: absolute;
                width: 15px;
                height: 20px;
                top: 5px;
                background: linear-gradient(45deg, var(--primary-color) 10%, var(--secondary-color) 90%);
                opacity: 0.8; /* Slightly more transparent */
                border-radius: 50% 50% 50% 50% / 80% 80% 60% 60%;
                z-index: 2;
            }

            .butterfly-wing.left {
                left: 3px;
                transform-origin: right center;
                animation: flapLeft 0.15s ease-in-out infinite alternate;
            }

            .butterfly-wing.right {
                right: 3px;
                transform-origin: left center;
                animation: flapRight 0.15s ease-in-out infinite alternate;
            }

            @keyframes flapLeft {
                from { transform: rotateY(15deg) scale(1); }
                to { transform: rotateY(70deg) scale(0.95); } /* Added slight scale */
            }

            @keyframes flapRight {
                from { transform: rotateY(-15deg) scale(1); }
                to { transform: rotateY(-70deg) scale(0.95); } /* Added slight scale */
            }

            /* Enhanced chart container */
            .chart-container {
                max-width: 550px; /* Slightly smaller max width */
                margin: 20px auto 0 auto; /* Add margin top */
                position: relative;
                padding: 25px; /* Increased padding */
                border-radius: 15px;
                background: rgba(255, 255, 255, 0.7); /* More transparent */
                backdrop-filter: blur(8px); /* Stronger blur */
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
                transition: all 0.4s ease; /* Faster transition */
            }

            .chart-container:hover {
                transform: translateY(-8px); /* Less lift */
                box-shadow: 0 18px 40px rgba(0,0,0,0.18); /* Adjusted shadow */
            }

             /* Heading underline effect */
            .section-heading {
                position: relative;
                display: inline-block;
                padding-bottom: 15px; /* Space for underline */
            }

            .section-heading::after {
                content: '';
                position: absolute;
                bottom: 0; /* Position at the bottom */
                left: 50%; /* Start from center */
                transform: translateX(-50%); /* Center align */
                width: 60%; /* Underline width */
                height: 3px;
                background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
                transform-origin: center; /* Expand from center */
                transition: width 0.4s ease; /* Animate width */
            }

            /* No hover effect needed if always visible, or add .section-heading:hover::after { width: 80%; } for hover grow */

            /* Pulse effect for the icon */
            .feature {
                position: relative;
                z-index: 1;
                display: inline-flex; /* Needed for centering pseudo element */
                justify-content: center;
                align-items: center;
            }

             /* Outer ring pulse animation */
            .feature::after {
                content: '';
                position: absolute;
                width: 100%;
                height: 100%;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                border-radius: inherit; /* Use parent border-radius */
                background: transparent; /* Ring is border */
                border: 2px solid;
                border-color: var(--primary-color);
                z-index: -1;
                opacity: 0.7;
                animation: pulse-ring 2s cubic-bezier(0.215, 0.610, 0.355, 1) infinite;
            }

            @keyframes pulse-ring {
                0% {
                    transform: translate(-50%, -50%) scale(0.8);
                    opacity: 0.7;
                }
                80%, 100% {
                    transform: translate(-50%, -50%) scale(1.5); /* Expand further */
                    opacity: 0;
                }
            }

            /* Inner element subtle pulse */
            .feature > i { /* Assuming the icon is direct child */
                 animation: pulse-icon 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
            }

             @keyframes pulse-icon {
                 0% { transform: scale(1); }
                 50% { transform: scale(1.08); }
                 100% { transform: scale(1); }
             }

        </style>
    </head>

    <body class="d-flex flex-column">

        <div class="animated-background">
            <div class="web-container" id="webContainer"></div>
            <div id="butterflies-container"></div>
        </div>

        <main class="flex-shrink-0">
            <nav class="navbar navbar-expand-lg navbar-light bg-white py-3 shadow-sm"> <div class="container px-5">
                    <a class="navbar-brand" href="index.html"><span class="fw-bolder text-primary">Moataz Elmesmary <i class="bi bi-code-slash"></i></span></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 small fw-bolder">
                            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="index.html#About me">About Me</a></li>
                            <li class="nav-item"><a class="nav-link" href="resume.html">Resume</a></li>
                            <li class="nav-item"><a class="nav-link" href="projects.html">Projects</a></li>
                            <li class="nav-item"><a class="nav-link active" aria-current="page" href="contact.html">Contact</a></li> </ul>
                    </div>
                </div>
            </nav>

            <section class="py-5">
                <div class="container px-5">
                    <div class="py-5 px-4 px-md-5 contact-card">
                        <div class="text-center mb-5">
                             <div class="feature bg-gradient-primary-to-secondary text-white rounded-3 mb-4"><i class="bi bi-envelope-heart-fill fs-2"></i></div>
                            <h1 class="display-5 fw-bolder mb-4"><span class="text-gradient d-inline section-heading">Get in touch</span></h1> <p class="lead fw-normal text-muted mb-0">Let's work together! <br>You can follow me on the following social media platforms or send an email.<br> Feel free to reach out for any questions, new opportunities, or collaborations.</p>
                        </div>

                        <div class="row gx-5 justify-content-center mb-5">
                            <div class="social-icons-container">
                                <div class="social-icon-wrapper" style="--i:1">
                                    <a href="https://www.linkedin.com/in/moatazelmesmary/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                                        <i class="bi bi-linkedin social-icon"></i>
                                    </a>
                                </div>
                                <div class="social-icon-wrapper" style="--i:2">
                                    <a href="https://github.com/Moataz-Elmesmary" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                                        <i class="bi bi-github social-icon"></i>
                                    </a>
                                </div>
                                <div class="social-icon-wrapper" style="--i:3">
                                    <a href="mailto:moataz.mesmary@gmail.com" target="_blank" rel="noopener noreferrer" aria-label="Email">
                                        <i class="bi bi-google social-icon"></i>
                                    </a>
                                </div>
                                <div class="social-icon-wrapper" style="--i:4">
                                    <a href="https://api.whatsapp.com/send?phone=201000033506" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
                                        <i class="bi bi-whatsapp social-icon"></i>
                                    </a>
                                </div>
                                <div class="social-icon-wrapper" style="--i:5">
                                    <a href="https://www.instagram.com/moatazelmesmary/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                                        <i class="bi bi-instagram social-icon"></i>
                                    </a>
                                </div>
                                <div class="social-icon-wrapper" style="--i:6">
                                    <a href="https://www.facebook.com/MoatazElmesmary/" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                                        <i class="bi bi-facebook social-icon"></i>
                                    </a>
                                </div>
                                <div class="social-icon-wrapper" style="--i:7">
                                    <a href="https://x.com/MoatazElmesmary" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
                                        <i class="bi bi-twitter-x social-icon"></i>
                                    </a>
                                </div>
                            </div>
                        </div>

                   <!-- Begin Contact Form Code - Copy from here -->
<div class="row gx-5 justify-content-center">
    <div class="col-lg-8">
        <form id="contactForm" action="https://formsubmit.co/moataz.mesmary@gmail.com" method="POST">
            <!-- FormSubmit Configuration -->
            <input type="hidden" name="_subject" value="New contact form submission from portfolio">
            <input type="hidden" name="_template" value="table">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_next" value="https://moataz-mesmary.github.io/thankyou.html">
            
            <!-- Honeypot field to prevent spam -->
            <input type="text" name="_honey" style="display:none">
            
            <!-- Form Fields -->
            <div class="form-floating mb-3">
                <input class="form-control" id="name" name="name" type="text" placeholder="Enter your name..." required />
                <label for="name">Full name</label>
            </div>
            
            <div class="form-floating mb-3">
                <input class="form-control" id="email" name="email" type="email" placeholder="name@example.com" required />
                <label for="email">Email address</label>
            </div>
            
            <div class="form-floating mb-3">
                <input class="form-control" id="phone" name="phone" type="tel" placeholder="(123) 456-7890" />
                <label for="phone">Phone number (Optional)</label>
            </div>
            
            <div class="form-floating mb-3">
                <textarea class="form-control" id="message" name="message" placeholder="Enter your message here..." style="height: 10rem" required></textarea>
                <label for="message">Message</label>
            </div>
            
            <div class="d-grid">
                <button class="btn btn-primary btn-lg" id="submitButton" type="submit">Submit</button>
            </div>
        </form>
        
        <!-- Optional: Add this right before your form's closing div to add submission tracking -->
        <script>
            document.getElementById('contactForm').addEventListener('submit', function(e) {
                console.log('Form submitted');
                document.getElementById('submitButton').textContent = 'Sending...';
                document.getElementById('submitButton').disabled = true;
            });
        </script>
    </div>
</div>
<!-- End Contact Form Code -->

                        <div class="text-center mt-5">
                            <h3 class="fw-bold mb-4 text-gradient section-heading">My Skills</h3>
                            <div class="chart-container">
                                <canvas id="skillsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

<!-- Footer-->
<footer class="bg-white py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto">
                <div class="small m-0">Copyright &copy; 2025 Moataz Elmesmary</div>
            </div>
            <div class="col-auto">
                <a class="small" href="/privacy.html">Privacy</a>
                <span class="mx-1">&middot;</span>
                <a class="small" href="/terms.html">Terms</a>
                <span class="mx-1">&middot;</span>
                <a class="small" href="/contact.html">Contact</a>
            </div>
        </div>
    </div>
</footer>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

        <script>
            document.addEventListener('DOMContentLoaded', function() {

                // --- Initialize Skills Chart (Restored) ---
                if (typeof Chart !== 'undefined') {
                    var ctx = document.getElementById('skillsChart').getContext('2d');
                    if (ctx) { // Check if canvas element exists
                         var skillsChart = new Chart(ctx, {
                             type: 'radar',
                             data: {
                                 labels: ['Python', 'Power BI', 'SQL', 'Data Viz', 'ETL', 'Excel', 'Tableau'], // Shortened 'Data Visualization'
                                 datasets: [{
                                     label: 'Skill Level',
                                     data: [100, 100, 100, 100, 100, 100, 100], // Example data (adjust to your actual skill levels)
                                     backgroundColor: 'rgba(159, 26, 226, 0.2)', // Secondary color transparent
                                     borderColor: 'rgba(41, 55, 240, 1)', // Primary color solid
                                     borderWidth: 2,
                                     pointBackgroundColor: 'rgba(41, 55, 240, 1)', // Primary color points
                                     pointBorderColor: '#fff',
                                     pointHoverRadius: 7,
                                     pointHoverBackgroundColor: '#fff',
                                     pointHoverBorderColor: 'rgba(41, 55, 240, 1)'
                                 }]
                             },
                             options: {
                                 responsive: true,
                                 maintainAspectRatio: false, // Allows chart to resize better within container
                                 elements: {
                                     line: {
                                         borderWidth: 3
                                     }
                                 },
                                 scales: {
                                     r: {
                                         angleLines: {
                                             display: true,
                                             color: 'rgba(0,0,0,0.1)'
                                         },
                                         grid: {
                                             color: 'rgba(0,0,0,0.1)'
                                         },
                                         pointLabels: {
                                             font: {
                                                 size: 13, // Adjusted font size
                                                 weight: 'bold'
                                             },
                                             color: '#333' // Darker label color
                                         },
                                         ticks: {
                                             beginAtZero: true,
                                             max: 100,
                                             min: 0,
                                             stepSize: 20,
                                             backdropColor: 'rgba(255, 255, 255, 0.75)', // Background for ticks
                                             padding: 8, // Padding for ticks
                                             // display: false // Hides the numeric ticks if desired
                                         }
                                     }
                                 },
                                 plugins: {
                                     legend: {
                                         display: false // Hide the legend label
                                     },
                                     tooltip: {
                                         callbacks: {
                                             label: function(context) {
                                                 return context.dataset.label + ': ' + context.raw + '%';
                                             }
                                         }
                                     }
                                 }
                             }
                         });
                     } else {
                         console.error("Skills chart canvas element not found.");
                     }
                 } else {
                     console.error("Chart.js library not loaded.");
                 }


                // --- Web Spider Effect ---
                const webContainer = document.getElementById('webContainer');
                if (webContainer) { // Check if container exists
                    const webNodes = [];
                    const webLines = [];
                    const nodeCount = Math.min(25, Math.floor(window.innerWidth / 70)); // Adjust node count based on width
                    const maxDistance = 200; // Reduced connection distance

                    // Create web nodes
                    for (let i = 0; i < nodeCount; i++) {
                        const node = document.createElement('div');
                        node.className = 'web-node';

                        const posX = Math.random() * window.innerWidth;
                        const posY = Math.random() * window.innerHeight;

                        node.style.left = posX + 'px';
                        node.style.top = posY + 'px';

                        webNodes.push({
                            element: node,
                            x: posX,
                            y: posY,
                            vx: (Math.random() - 0.5) * 0.3, // Slower speed
                            vy: (Math.random() - 0.5) * 0.3
                        });

                        webContainer.appendChild(node);
                    }

                    // Update web lines connecting nodes
                    function updateWebLines() {
                        webLines.forEach(line => {
                            if (line.parentNode) {
                                webContainer.removeChild(line);
                            }
                        });
                        webLines.length = 0;

                        for (let i = 0; i < webNodes.length; i++) {
                            for (let j = i + 1; j < webNodes.length; j++) {
                                const node1 = webNodes[i];
                                const node2 = webNodes[j];

                                const dx = node2.x - node1.x;
                                const dy = node2.y - node1.y;
                                const distance = Math.sqrt(dx * dx + dy * dy);

                                if (distance < maxDistance) {
                                    const line = document.createElement('div');
                                    line.className = 'web-line';

                                    line.style.width = distance + 'px';
                                    line.style.left = node1.x + 'px';
                                    line.style.top = node1.y + 'px';

                                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                                    line.style.transform = `rotate(${angle}deg)`;
                                    line.style.opacity = Math.max(0, (1 - distance / maxDistance) * 0.5).toString(); // Fainter lines

                                    webContainer.appendChild(line);
                                    webLines.push(line);
                                }
                            }
                        }
                    }

                    // Animate web nodes
                    let animationFrameIdWeb;
                    function animateWebNodes() {
                        for (let i = 0; i < webNodes.length; i++) {
                            const node = webNodes[i];

                            node.x += node.vx;
                            node.y += node.vy;

                            // Boundary check with smoother rebound
                            if (node.x < 0 || node.x > window.innerWidth) {
                                node.vx *= -1;
                                node.x = Math.max(0, Math.min(node.x, window.innerWidth)); // Clamp position
                            }
                             if (node.y < 0 || node.y > window.innerHeight) {
                                 node.vy *= -1;
                                 node.y = Math.max(0, Math.min(node.y, window.innerHeight)); // Clamp position
                             }

                            node.element.style.left = node.x + 'px';
                            node.element.style.top = node.y + 'px';
                        }

                        updateWebLines();
                        animationFrameIdWeb = requestAnimationFrame(animateWebNodes);
                    }
                     animateWebNodes(); // Start animation

                     // Optional: Stop animation when tab is not visible
                     document.addEventListener("visibilitychange", () => {
                        if (document.hidden) {
                            cancelAnimationFrame(animationFrameIdWeb);
                        } else {
                            animateWebNodes();
                        }
                     });

                } else {
                    console.error("Web container element not found.");
                }


                // --- Butterflies Effect ---
                const butterfliesContainer = document.getElementById('butterflies-container');
                 if (butterfliesContainer) { // Check if container exists
                     const butterflyCount = 5; // Reduced count
                     const butterflies = [];

                     function createButterfly() {
                         const butterfly = document.createElement('div');
                         butterfly.className = 'butterfly';

                         const body = document.createElement('div');
                         body.className = 'butterfly-body';
                         butterfly.appendChild(body);

                         const leftWing = document.createElement('div');
                         leftWing.className = 'butterfly-wing left';
                         butterfly.appendChild(leftWing);

                         const rightWing = document.createElement('div');
                         rightWing.className = 'butterfly-wing right';
                         butterfly.appendChild(rightWing);

                         // Randomize wing colors
                         const hue1 = Math.floor(Math.random() * 360);
                         const hue2 = (hue1 + Math.random() * 60 + 20) % 360; // Vary color difference
                         const gradient = `linear-gradient(${Math.random()*90 - 45}deg, hsl(${hue1}, 80%, 65%), hsl(${hue2}, 85%, 60%))`;
                         leftWing.style.background = gradient;
                         rightWing.style.background = gradient;

                         butterfliesContainer.appendChild(butterfly);

                         // Set initial state and properties for animation
                         const butterflyData = {
                             element: butterfly,
                             x: Math.random() * window.innerWidth,
                             y: Math.random() * window.innerHeight,
                             targetX: Math.random() * window.innerWidth,
                             targetY: Math.random() * window.innerHeight,
                             speed: 0.5 + Math.random() * 0.8, // Slower base speed
                             angle: Math.random() * 360,
                             angleSpeed: (Math.random() - 0.5) * 2 // Random rotation
                         };
                         butterflies.push(butterflyData);

                         // Fade in
                         setTimeout(() => { butterfly.style.opacity = '1'; }, 100);
                     }

                     for (let i = 0; i < butterflyCount; i++) {
                         createButterfly();
                     }

                     // Animate butterflies
                     let animationFrameIdButterflies;
                     function animateButterflies() {
                         butterflies.forEach(bf => {
                             // Move towards target
                             const dx = bf.targetX - bf.x;
                             const dy = bf.targetY - bf.y;
                             const dist = Math.sqrt(dx * dx + dy * dy);

                             if (dist < 50) { // If close to target, pick a new target
                                 bf.targetX = Math.random() * window.innerWidth;
                                 bf.targetY = Math.random() * window.innerHeight;
                             } else {
                                 // Move smoothly towards target
                                 bf.x += (dx / dist) * bf.speed;
                                 bf.y += (dy / dist) * bf.speed;
                             }

                             // Add some fluttering motion
                             bf.x += Math.sin(Date.now() * 0.002 + bf.angle) * 0.5;
                             bf.y += Math.cos(Date.now() * 0.0015 + bf.angle) * 0.5;


                             // Keep within bounds
                             bf.x = Math.max(0, Math.min(bf.x, window.innerWidth - 30));
                             bf.y = Math.max(0, Math.min(bf.y, window.innerHeight - 30));

                             // Update element position and rotation
                             bf.element.style.left = bf.x + 'px';
                             bf.element.style.top = bf.y + 'px';

                             // Optional: Rotate butterfly slightly based on direction (more complex)
                             // bf.angle += bf.angleSpeed;
                             // bf.element.style.transform = `rotate(${bf.angle}deg)`;
                         });

                         animationFrameIdButterflies = requestAnimationFrame(animateButterflies);
                     }
                     animateButterflies(); // Start animation

                     // Optional: Stop animation when tab is not visible
                     document.addEventListener("visibilitychange", () => {
                        if (document.hidden) {
                            cancelAnimationFrame(animationFrameIdButterflies);
                        } else {
                             animateButterflies();
                        }
                     });

                 } else {
                     console.error("Butterflies container element not found.");
                 }

            }); // End DOMContentLoaded
        </script>

    </body>
</html>